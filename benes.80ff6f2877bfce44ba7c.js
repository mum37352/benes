(()=>{"use strict";var t,e={4903:(t,e,r)=>{r.d(e,{Ay:()=>o,yE:()=>s});class o{constructor(t){this.lut=[...t],this.invLut=Array(t.length);for(let e=0;e<t.length;e++)this.invLut[t[e]]=e}invert(){let t=this.invLut;this.invLut=this.lut,this.lut=t}}function s(t,e){return Math.min(e-1,Math.max(0,Math.round(t)))}},5288:(t,e,r)=>{var o=r(6540),s=r(5338),i=r(4682),l=r(6801);let n="#161b22",a="#faa356",h="#a2d2fb",c="#ecf2f8",d="#7ce38b",u="#cea5fb";function f(t){return l.exT().domain([0,t]).interpolator((e=["#fa7970","#ecf2f8","#faa356","#7ce38b","#a2d2fb","#77bdfb","#cea5fb"],t=>l.$Bd(l.dJd,e)(Math.min(Math.max(0,t),1))));var e}var p=r(9980),x=r(4903),b=r(6313),m=r(4848);class g{constructor(t,e,r,o){this.top=e,this.bottom=o,this.left=t,this.right=r}pad(t){this.left-=t,this.top-=t,this.right+=t,this.bottom+=t}scale(t,e){this.right=t(this.right),this.left=t(this.left),this.top=e(this.top),this.bottom=e(this.bottom)}width(){return this.right-this.left}height(){return this.bottom-this.top}}class v{constructor(t,e,r,o){this.order=t,this.width=2*t,this.height=2**t,this.left=e,this.top=r,this.id=o}isInput(t){return 0==t}isOutput(t){return t==this.width-1}isSubOutput(t){return t>=this.width/2}isTerminal(t){return this.isOutput(t)||this.isInput(t)}globalX(t){return this.left+t}globalY(t){return this.top+t}topSubnet(){return new v(this.order-1,this.globalX(1),this.globalY(0),this.id+"0")}bottomSubnet(){return new v(this.order-1,this.globalX(1),this.globalY(this.height/2),this.id+"1")}extent(){return new g(this.globalX(0),this.globalY(0),this.globalX(this.width-1),this.globalY(this.height-1))}}class j{constructor(t,e,r){this.rootSubnet=new v(t,0,0,"");let o=this.rootSubnet.extent();this.vertical=e;let[s,i]=this.verticalitySwap([o.left,o.right],[o.top,o.bottom]);this.xScale=l.m4Y(s,[r.left,r.right]),this.yScale=l.m4Y(i,[r.top,r.bottom])}verticalitySwap(t,e){return this.vertical?[e,t]:[t,e]}toScreen(t,e){let[r,o]=this.verticalitySwap(t,e);return[this.xScale(r),this.yScale(o)]}toScreenBox(t){let e=new g(0,0,0,0);return[e.left,e.top]=this.toScreen(t.left,t.top),[e.right,e.bottom]=this.toScreen(t.right,t.bottom),e}yFromScreen(t,e){let r=this.vertical?this.xScale.invert(t):this.yScale.invert(e);return r=(0,x.yE)(r,this.rootSubnet.height),r}}function y(t,e){let r=2**(t-1),o=e;return e>=r?o-=r:o+=r,o}var S=function(t){return t[t.Top=0]="Top",t[t.Bottom=1]="Bottom",t[t.None=2]="None",t}(S||{});function w(t,e){if(1===t)return 0===e.lut[0]?[{edgeColors:[S.None],verts:[0,0]},{edgeColors:[S.None],verts:[1,1]}]:[{edgeColors:[S.None],verts:[0,1]},{edgeColors:[S.None],verts:[1,0]}];let r=2**t,o=Array(r),s=new Set(Array(r).keys());for(;s.size>0;){let r=-1;for(let t of s){r=t;break}if(r<0)break;let i=[];for(s.delete(r),i.push(r),o[r]={edgeColors:[S.Top],verts:[r]};;){let r=i.shift();if(void 0===r)break;let l=1-o[r].edgeColors[0],n=y(t,r),a=e.invLut[y(t,e.lut[r])];for(let t of[n,a])s.has(t)&&(s.delete(t),o[t]={edgeColors:[l],verts:[t]},i.push(t))}}let i=[Array(r/2),Array(r/2)];for(let t=0;t<r;t++){let s=t%(r/2);i[o[t].edgeColors[0]][s]=e.lut[t]%(r/2)}let l=i.map((e=>w(t-1,new x.Ay(e))));for(let t=0;t<r;t++){let e=t%(r/2),s=o[t],i=s.edgeColors[0],n=i*r/2;s.edgeColors.push(...l[i][e].edgeColors),s.verts.push(...l[i][e].verts.map((t=>t+n)))}for(let t=0;t<r;t++){let r=o[t];r.edgeColors.push(r.edgeColors[0]),r.verts.push(e.lut[t])}return o}function k(t){let{order:e,vertical:r=!0,doRouting:s=!0,bipartiteColors:l=!1,drawBoxes:v=!0,dottedLines:y=!1}=t,k=2**e,N=(0,o.useRef)(null),[C,_]=(0,o.useState)(),[O,B]=(0,o.useState)(new x.Ay([...Array(k).keys()])),I=50,A=50;s&&(r?A+=50:I+=50);let K=C?.width||0,T=C?.height||0,F=new g(50,50,K-I,T-A),L=new j(e,r,F),[Y,M]=(0,o.useState)(e);if(Y!=e)return M(e),B(new x.Ay([...Array(k).keys()])),(0,m.jsx)(m.Fragment,{});(0,o.useLayoutEffect)((()=>{_(N.current?.getBoundingClientRect())}),[N]),"undefined"!=typeof window&&(0,i.A)(N,(t=>_(t.contentRect)));let $=[];function P(t,e,r){let[o,s]=L.verticalitySwap(t,e);return o+=r?-13:13,L.verticalitySwap(o,s)}for(let t=0;t<L.rootSubnet.width;t++){let e=L.rootSubnet.isInput(t),r=L.rootSubnet.isTerminal(t),o=L.rootSubnet.isSubOutput(t)?h:a;for(let s=0;s<L.rootSubnet.height;s++){let[i,l]=L.toScreen(t,s);r&&([i,l]=P(i,l,e)),$.push((0,m.jsx)("circle",{cx:i,cy:l,stroke:"none",r:r?15:8,fill:o},t+","+s))}}function R(t,e,r,o,s,i){let l,n,a,h="";function c(r,o,s,i,l,n){let[a,h]=L.toScreen(o,s),[c,d]=L.toScreen(i,l);t.push((0,m.jsx)("line",{x1:a,y1:h,x2:c,y2:d,strokeOpacity:.5,stroke:n,strokeWidth:2},e+r))}i?(l=a=o,n=h=s):(l=h=o,n=a=s),c("t",r.left,r.top,r.right,r.top,l),c("b",r.left,r.bottom,r.right,r.bottom,n),c("f",r.left,r.top,r.right,r.bottom,a),c("r",r.left,r.bottom,r.right,r.top,h)}let z=[],D=[];!function t(e,r,o){if(1===o.order)R(e,o.id+"but",o.extent(),c,c,!1);else{let s=o.topSubnet(),i=o.bottomSubnet(),l=20,n=L.toScreenBox(s.extent()),a=L.toScreenBox(i.extent());n.pad(l),a.pad(l),r.push((0,m.jsx)("rect",{rx:10,ry:10,x:n.left,y:n.top,width:n.right-n.left,height:n.bottom-n.top,stroke:"none",fill:"url('#topGrad')",fillOpacity:.2},"br"+s.id)),r.push((0,m.jsx)("rect",{rx:10,ry:10,x:a.left,y:a.top,width:a.right-a.left,height:a.bottom-a.top,stroke:"none",fill:"url('#botGrad')",fillOpacity:.2},"br"+i.id)),t(e,r,s),t(e,r,i);for(let t=0;t<s.height;t++){let r=new g(0,0,0,0);r.top=s.globalY(t),r.bottom=i.globalY(t),r.left=o.extent().left,r.right=s.extent().left,R(e,o.id+"_butt_"+t+"_",r,d,u,!1),r.right=o.extent().right,r.left=s.extent().right,R(e,o.id+"_butb_"+t+"_",r,d,u,!0)}}}(z,D,L.rootSubnet);let G=[];!function(t,e,r){let o=2**r;var s=f(o);for(let r=0;r<o;r++){let o=s(r),i=e[r];for(let e=0;e<i.edgeColors.length;e++){let[s,n]=L.toScreen(e,i.verts[e]),[a,h]=L.toScreen(e+1,i.verts[e+1]),f=i.edgeColors[e],p=c;l?f===S.Top?p=d:f===S.Bottom&&(p=u):p=o.toString(),t.push((0,m.jsx)("line",{"stroke-linecap":"round",x1:s,y1:n,x2:a,y2:h,fill:"none",strokeWidth:"6",strokeDasharray:y?"10,30":"",stroke:p,children:y&&(0,m.jsx)("animate",{attributeName:"stroke-dashoffset",values:"40;0",dur:"3s",calcMode:"linear",repeatCount:"indefinite"})},`rt_${r}_${e}`))}}}(G,w(e,O),e);let X=[],E=[];!function(t){for(let e=0;e<L.rootSubnet.height;e++){let[r,o]=P(...L.toScreen(0,e),!0);t.push((0,m.jsx)("div",{className:"absolute pointer-events-none bold",style:{transform:`translate(-50%, -50%) translate(${r}px, ${o}px)`,color:n},children:(0,m.jsx)(p.KI,{children:`${e+1}`})},"il_"+e))}}(X),function(t){for(let e=0;e<L.rootSubnet.height;e++){let r=O.lut[e],[o,s]=P(...L.toScreen(L.rootSubnet.extent().right,r),!1);t.push((0,m.jsx)("div",{className:"absolute pointer-events-none",style:{transform:`translate(-50%, -50%) translate(${o}px, ${s}px)`,color:n},children:(0,m.jsx)(p.KI,{children:`${r+1}`})},"ol_"+e.toString()))}}(X),s&&X.push(...E);let J=(0,m.jsxs)("svg",{className:"absolute",width:K,height:T,children:[(0,m.jsx)("filter",{id:"noiseFilter",children:(0,m.jsx)("feTurbulence",{type:"fractalNoise",baseFrequency:"3.76",numOctaves:"3",stitchTiles:"stitch"})}),(0,m.jsxs)("defs",{children:[(0,m.jsxs)("linearGradient",{id:"topGrad",x1:"10%",y1:"100%",x2:"90%",y2:"0%",children:[(0,m.jsx)("stop",{offset:"10%",stopColor:d,stopOpacity:.8}),(0,m.jsx)("stop",{offset:"90%",stopColor:d,stopOpacity:.2})]}),(0,m.jsxs)("linearGradient",{id:"botGrad",x1:"10%",y1:"100%",x2:"90%",y2:"0%",children:[(0,m.jsx)("stop",{offset:"10%",stopColor:u,stopOpacity:.8}),(0,m.jsx)("stop",{offset:"90%",stopColor:u,stopOpacity:.2})]})]}),v&&D,z,s&&G,(0,m.jsx)("g",{fill:"white",stroke:"currentColor",strokeWidth:"1.5",children:$})]});return(0,m.jsx)("div",{className:"flex items-stretch w-full h-full p-1",style:{background:n,flexDirection:r?"column":"row"},children:(0,m.jsx)("div",{className:"flex grow items-stretch p-1",children:(0,m.jsxs)("div",{ref:N,className:"relative flex grow p-0 m-0 overflow-hidden",children:[J,X,s&&(0,m.jsx)(b.A,{perm:O,onPermChanged:B,vertical:r,xyToIdx:(t,e)=>L.yFromScreen(t,e),idxToXY:t=>P(...L.toScreen(L.rootSubnet.extent().right,t),!1)})]})})})}var N=r(1925),C=r(1821),_=r(2349),O=(r(2222),r(3221),r(4433)),B=r(2927);function I(){let[t,e]=(0,o.useState)(3),[r,s]=(0,o.useState)(!0),[i,l]=(0,o.useState)(!1),[n,c]=(0,o.useState)(!0),[d,u]=(0,o.useState)(!1),[f,x]=(0,o.useState)(!1);return(0,m.jsxs)(N.O,{className:"h-full w-full",children:[(0,m.jsx)(N.K,{size:75,className:"overflow-hidden",children:(0,m.jsx)(k,{order:t,vertical:r,doRouting:i,drawBoxes:n,bipartiteColors:d,dottedLines:f})}),(0,m.jsx)(N.K,{size:25,className:"",children:(0,m.jsxs)("div",{className:"pl-7 pr-7 space-y-4 overflow-auto",children:[(0,m.jsxs)("h1",{className:"text-xl font-bold my-4 font-italic",children:["Beneš ",i?"Routing":"Nets"]}),(0,m.jsxs)("p",{children:["This is an interactive demo of the so-called ",(0,m.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"underline text-sky-300 hover:text-sky-200",href:"https://eng.libretexts.org/Bookshelves/Computer_Science/Programming_and_Computation_Fundamentals/Mathematics_for_Computer_Science_(Lehman_Leighton_and_Meyer)/02%3A_Structures/10%3A_Communication_Networks/10.09%3A_Benes_Network",children:"Beneš networks"}),"."]}),(0,m.jsxs)("p",{children:["They have ",(0,m.jsxs)("span",{style:{color:a},children:[(0,m.jsx)(p.KI,{children:"n"}),' "input nodes"']})," and ",(0,m.jsxs)("span",{style:{color:h},children:[(0,m.jsx)(p.KI,{children:"n"}),' "output nodes"']})," (indicated as big circles). In total, they have ",(0,m.jsx)(p.KI,{children:"2 n \\log n"})," nodes and a maximum degree of ",(0,m.jsx)(p.KI,{children:"4"}),"."]}),(0,m.jsxs)("p",{children:["They have a recursive structure, as indicated by the boxes. That is why ",(0,m.jsx)(p.KI,{children:"n=2^k"})," is a power of two. We refer to ",(0,m.jsx)(p.KI,{children:"k"})," as the order."]}),(0,m.jsxs)("div",{className:"text-sm",children:[(0,m.jsxs)("label",{className:"block mb-1 font-bold",htmlFor:"benesOrder",children:["Order ",(0,m.jsx)(p.KI,{children:"k"}),":"]}),(0,m.jsx)(C.Y,{className:"w-full",name:"benesOrder",value:t,onValueChange:t=>{let r=t.value;r&&!isNaN(r)&&e(r)},mode:"decimal",showButtons:!0,min:1,max:6})]}),(0,m.jsxs)("div",{className:"text-sm",children:[(0,m.jsx)("label",{className:"block mb-1 font-bold",htmlFor:"vertical",children:"Layout direction:"}),(0,m.jsx)(B.J,{className:"w-full",value:r?"Vertical":"Horizontal",onChange:t=>s("Vertical"==t.value),options:["Vertical","Horizontal"]})]}),(0,m.jsxs)("p",{children:["Beneš nets satisfy the following property: Any bijection ",(0,m.jsx)(p.KI,{children:"\\pi \\in S_n"})," from its ",(0,m.jsxs)("span",{style:{color:a},children:[(0,m.jsx)(p.KI,{children:"n"})," input nodes"]})," to its ",(0,m.jsxs)("span",{style:{color:h},children:[(0,m.jsx)(p.KI,{children:"n"})," output nodes"]})," can be realized by vertex-disjoint paths. Try it!"]}),(0,m.jsxs)("div",{className:"text-sm",children:[(0,m.jsx)("label",{className:"block mb-1 font-bold",htmlFor:"vertical",children:"Show routes:"}),(0,m.jsx)(O.H,{checked:i,onChange:t=>l(t.value)})]}),i&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("p",{children:["Click on any prescription arrow ",(0,m.jsx)(p.KI,{children:"\\mapsto"})," and drag it to configure the bijection ",(0,m.jsx)(p.KI,{children:"\\pi"}),"."]}),(0,m.jsxs)("div",{className:"text-sm",children:[(0,m.jsx)("label",{className:"block mb-1 font-bold",htmlFor:"vertical",children:"Path coloring:"}),(0,m.jsx)(B.J,{className:"w-full",value:d?"Bipartite":"Pathwise",onChange:t=>u("Bipartite"==t.value),options:["Bipartite","Pathwise"]})]}),(0,m.jsxs)("div",{className:"text-sm",children:[(0,m.jsx)("label",{className:"block mb-1 font-bold",htmlFor:"vertical",children:"Lines:"}),(0,m.jsx)(B.J,{className:"w-full",value:f?"Dotted":"Simple",onChange:t=>x("Dotted"==t.value),options:["Simple","Dotted"]})]})]})]})})]})}const A=s.createRoot(document.getElementById("root"));(0,p._)(),A.render((0,m.jsx)(o.StrictMode,{children:(0,m.jsx)(_.mD,{children:(0,m.jsx)("div",{className:"fixed flex overflow-hidden h-dvh w-full",children:(0,m.jsx)(I,{})})})}))}},r={};function o(t){var s=r[t];if(void 0!==s)return s.exports;var i=r[t]={exports:{}};return e[t](i,i.exports,o),i.exports}o.m=e,t=[],o.O=(e,r,s,i)=>{if(!r){var l=1/0;for(c=0;c<t.length;c++){for(var[r,s,i]=t[c],n=!0,a=0;a<r.length;a++)(!1&i||l>=i)&&Object.keys(o.O).every((t=>o.O[t](r[a])))?r.splice(a--,1):(n=!1,i<l&&(l=i));if(n){t.splice(c--,1);var h=s();void 0!==h&&(e=h)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[r,s,i]},o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.j=222,(()=>{var t={222:0};o.O.j=e=>0===t[e];var e=(e,r)=>{var s,i,[l,n,a]=r,h=0;if(l.some((e=>0!==t[e]))){for(s in n)o.o(n,s)&&(o.m[s]=n[s]);if(a)var c=a(o)}for(e&&e(r);h<l.length;h++)i=l[h],o.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return o.O(c)},r=self.webpackChunkreact_ts_tailwind_starter=self.webpackChunkreact_ts_tailwind_starter||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var s=o.O(void 0,[967,810,76],(()=>o(5288)));s=o.O(s)})();
//# sourceMappingURL=benes.80ff6f2877bfce44ba7c.js.map