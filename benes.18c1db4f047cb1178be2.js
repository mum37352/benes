(()=>{"use strict";var e,t={456:(e,t,r)=>{var o=r(6540),s=r(5338),l=(r(2222),r(5215)),n=r(4903),i=r(1051),a=r(4817),d=r(6313),c=r(7337),h=r(6290),u=r(4848);function f(e,t){let r=2**(e-1),o=t;return t>=r?o-=r:o+=r,o}var x=function(e){return e[e.Top=0]="Top",e[e.Bottom=1]="Bottom",e[e.None=2]="None",e}(x||{});function m(e,t){if(1===e)return 0===t.lut[0]?[{edgeColors:[x.None],verts:[0,0]},{edgeColors:[x.None],verts:[1,1]}]:[{edgeColors:[x.None],verts:[0,1]},{edgeColors:[x.None],verts:[1,0]}];let r=2**e,o=Array(r),s=new Set(Array(r).keys());for(;s.size>0;){let r=-1;for(let e of s){r=e;break}if(r<0)break;let l=[];for(s.delete(r),l.push(r),o[r]={edgeColors:[x.Top],verts:[r]};;){let r=l.shift();if(void 0===r)break;let n=1-o[r].edgeColors[0],i=f(e,r),a=t.invLut[f(e,t.lut[r])];for(let e of[i,a])s.has(e)&&(s.delete(e),o[e]={edgeColors:[n],verts:[e]},l.push(e))}}let l=[Array(r/2),Array(r/2)];for(let e=0;e<r;e++){let s=e%(r/2);l[o[e].edgeColors[0]][s]=t.lut[e]%(r/2)}let i=l.map((t=>m(e-1,new n.Ay(t))));for(let e=0;e<r;e++){let t=e%(r/2),s=o[e],l=s.edgeColors[0],n=l*r/2;s.edgeColors.push(...i[l][t].edgeColors),s.verts.push(...i[l][t].verts.map((e=>e+n)))}for(let e=0;e<r;e++){let r=o[e];r.edgeColors.push(r.edgeColors[0]),r.verts.push(t.lut[e])}return o}function p(e){let{order:t,vertical:r=!0,doRouting:s=!0,bipartiteColors:f=!1,drawBoxes:p=!0,dottedLines:b=!1}=e,v=2**t,g=(0,o.useRef)(null),[j,y]=(0,o.useState)(new n.Ay([...Array(v).keys()])),[w,N]=(0,o.useState)(-1);function k(e){N(e)}function S(e){w===e&&N(-1)}w>=v&&N(-1);let{size:_,enableTransition:C}=(0,i.s)(g),O=_?.width||0,T=_?.height||0,B=new a.QT(t,0,0,"dummy"),I=(0,a.DB)(s,r),A=(0,a.Ej)(O,[I.left,B.width-1,I.right]),K=(0,a.Ej)(T,[I.top,B.height-1,I.bottom]),F=new h.az(A[0],K[0],A[0]+A[1],K[0]+K[1]),z=new a.Kd(t,r,F),L=Math.min(z.cellWidth(),z.cellHeight())/100,[M,W]=(0,o.useState)(t);if(M!=t)return W(t),y(new n.Ay([...Array(v).keys()])),(0,u.jsx)(u.Fragment,{});let D=[],E=[];for(let e=0;e<z.rootSubnet.width;e++){let t=z.rootSubnet.type(e),r=z.rootSubnet.subType(e);for(let o=0;o<z.rootSubnet.height;o++)(0,c.Tk)(L,z,t,(0,c.dg)(r),e,o,D,E)}function P(e,t,r,o,s,l){let n,i,a,d="";function c(r,o,s,l,n,i){let[a,d]=z.toScreen(o,s),[c,h]=z.toScreen(l,n);e.push((0,u.jsx)("line",{x1:a,y1:d,x2:c,y2:h,strokeOpacity:.5,stroke:i,strokeWidth:2*L},t+r))}l?(n=a=o,i=d=s):(n=d=o,i=a=s),c("t",r.left,r.top,r.right,r.top,n),c("b",r.left,r.bottom,r.right,r.bottom,i),c("f",r.left,r.top,r.right,r.bottom,a),c("r",r.left,r.bottom,r.right,r.top,d)}let R=m(t,j);let H=[],X=[];!function e(t,r,o){if(1===o.order)P(t,o.id+"but",o.extent(),l.Wm,l.Wm,!1);else{let s=o.topSubnet(),n=o.bottomSubnet(),i=20*L,a=z.toScreenBox(s.extent()),d=z.toScreenBox(n.extent()),c=.2,f=.2;if(w>=0){let e=R[w];o.extent().top<=e.verts[o.extent().left]&&o.extent().bottom>=e.verts[o.extent().left]&&(e.edgeColors[s.extent().left-1]===x.Top?c=.3:f=.3)}a.pad(i),d.pad(i),r.push((0,u.jsx)("rect",{className:"transition",rx:10*L,ry:10*L,x:a.left,y:a.top,width:a.right-a.left,height:a.bottom-a.top,stroke:"none",fill:"url('#topGrad')",fillOpacity:c},"br"+s.id)),r.push((0,u.jsx)("rect",{className:"transition",rx:10*L,ry:10*L,x:d.left,y:d.top,width:d.right-d.left,height:d.bottom-d.top,stroke:"none",fill:"url('#botGrad')",fillOpacity:f},"br"+n.id)),e(t,r,s),e(t,r,n);for(let e=0;e<s.height;e++){let r=new h.az(0,0,0,0);r.top=s.globalY(e),r.bottom=n.globalY(e),r.left=o.extent().left,r.right=s.extent().left,P(t,o.id+"_butt_"+e+"_",r,l.NZ,l.bX,!1),r.right=o.extent().right,r.left=s.extent().right,P(t,o.id+"_butb_"+e+"_",r,l.NZ,l.bX,!0)}}}(H,X,z.rootSubnet);let G=[];!function(e,t,r){let o=2**r;var s=(0,l.yw)(o);for(let r=0;r<o;r++){let o=s(r),n=t[r];for(let t=0;t<n.edgeColors.length;t++){let[s,i]=z.toScreen(t,n.verts[t]),[a,d]=z.toScreen(t+1,n.verts[t+1]),c=n.edgeColors[t],h=l.Wm;f?c===x.Top?h=l.NZ:c===x.Bottom&&(h=l.bX):h=o.toString();let m=b;w==r&&(m=!m),e.push((0,u.jsx)("line",{"stroke-linecap":"round",x1:s,y1:i,x2:a,y2:d,fill:"none",strokeWidth:6*L,strokeDasharray:m?"10,30":"",stroke:h,onMouseEnter:()=>k(r),onMouseLeave:()=>S(r),children:m&&(0,u.jsx)("animate",{attributeName:"stroke-dashoffset",values:"40;0",dur:"3s",calcMode:"linear",repeatCount:"indefinite"})},`rt_${r}_${t}`))}}}(G,R,t);let V=(0,u.jsxs)("svg",{className:"absolute",width:O,height:T,children:[(0,u.jsx)("filter",{id:"noiseFilter",children:(0,u.jsx)("feTurbulence",{type:"fractalNoise",baseFrequency:"3.76",numOctaves:"3",stitchTiles:"stitch"})}),(0,u.jsxs)("defs",{children:[(0,u.jsx)(l.eE,{color:l.NZ,id:"topGrad"}),(0,u.jsx)(l.eE,{color:l.bX,id:"botGrad"})]}),p&&X,H,s&&G,(0,u.jsx)("g",{fill:"white",stroke:"currentColor",strokeWidth:"1.5",children:D})]}),Y=(0,u.jsx)(d.A,{onHover:e=>k(e),onLeave:e=>S(e),zoom:L,enableTransition:C,perm:j,onPermChanged:y,vertical:r,xyToIdx:(e,t)=>z.yFromScreen(e,t),idxToXY:e=>(0,c.w2)(L,z,...z.toScreen(z.rootSubnet.extent().right,e),!1)});return(0,u.jsx)("div",{className:"flex items-stretch w-full h-full p-1",style:{background:l.oR,flexDirection:r?"column":"row"},children:(0,u.jsx)("div",{className:"flex grow items-stretch p-1",children:(0,u.jsxs)("div",{ref:g,className:"relative flex grow p-0 m-0 overflow-hidden",children:[V,E,s&&Y]})})})}var b=r(1925),v=r(2804),g=r(2349),j=r(4433),y=r(2927),w=r(6214),N=r(2860);function k(){let[e,t]=(0,o.useState)(3),[r,s]=(0,o.useState)(!0),[n,i]=(0,o.useState)(!1),[a,d]=(0,o.useState)(!0),[c,h]=(0,o.useState)(!1),[f,x]=(0,o.useState)(!1);return(0,u.jsxs)(b.O,{className:"h-full w-full",children:[(0,u.jsx)(b.K,{size:75,className:"overflow-hidden",children:(0,u.jsx)(p,{order:e,vertical:r,doRouting:n,drawBoxes:a,bipartiteColors:c,dottedLines:f})}),(0,u.jsx)(b.K,{size:25,className:"",children:(0,u.jsxs)("div",{className:"pl-7 pr-7 space-y-4 overflow-auto",children:[(0,u.jsxs)("h1",{className:"text-xl font-bold my-4 font-italic",children:["Beneš ",n?"Routing":"Nets"]}),(0,u.jsxs)("p",{children:["This is an interactive demo of the so-called ",(0,u.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"underline text-sky-300 hover:text-sky-200",href:"https://eng.libretexts.org/Bookshelves/Computer_Science/Programming_and_Computation_Fundamentals/Mathematics_for_Computer_Science_(Lehman_Leighton_and_Meyer)/02%3A_Structures/10%3A_Communication_Networks/10.09%3A_Benes_Network",children:"Beneš networks"}),"."]}),(0,u.jsxs)("p",{children:["They have ",(0,u.jsxs)("span",{style:{color:l.an},children:[(0,u.jsx)(w.KI,{children:"n"}),' "input nodes"']})," and ",(0,u.jsxs)("span",{style:{color:l.$I},children:[(0,u.jsx)(w.KI,{children:"n"}),' "output nodes"']})," (indicated as big circles). In total, they have ",(0,u.jsx)(w.KI,{children:"2 n \\log n"})," nodes and a maximum degree of ",(0,u.jsx)(w.KI,{children:"4"}),"."]}),(0,u.jsxs)("p",{children:["They have a recursive structure, as indicated by the boxes. That is why ",(0,u.jsx)(w.KI,{children:"n=2^k"})," is a power of two. We refer to ",(0,u.jsx)(w.KI,{children:"k"})," as the order."]}),(0,u.jsxs)("div",{className:"text-sm",children:[(0,u.jsxs)("label",{className:"block mb-1 font-bold",htmlFor:"benesOrder",children:["Order ",(0,u.jsx)(w.KI,{children:"k"}),":"]}),(0,u.jsx)(v.Y,{className:"w-full",name:"benesOrder",value:e,onValueChange:e=>{let r=e.value;r&&!isNaN(r)&&t(r)},mode:"decimal",showButtons:!0,min:1,max:6})]}),(0,u.jsxs)("div",{className:"text-sm",children:[(0,u.jsx)("label",{className:"block mb-1 font-bold",htmlFor:"vertical",children:"Layout direction:"}),(0,u.jsx)(y.J,{className:"w-full",value:r?"Vertical":"Horizontal",onChange:e=>s("Vertical"==e.value),options:["Vertical","Horizontal"]})]}),(0,u.jsxs)("p",{children:["Beneš nets satisfy the following property: Any bijection ",(0,u.jsx)(w.KI,{children:"\\pi \\in S_n"})," from its ",(0,u.jsxs)("span",{style:{color:l.an},children:[(0,u.jsx)(w.KI,{children:"n"})," input nodes"]})," to its ",(0,u.jsxs)("span",{style:{color:l.$I},children:[(0,u.jsx)(w.KI,{children:"n"})," output nodes"]})," can be realized by vertex-disjoint paths. Try it!"]}),(0,u.jsxs)("div",{className:"text-sm",children:[(0,u.jsx)("label",{className:"block mb-1 font-bold",htmlFor:"vertical",children:"Show routes:"}),(0,u.jsx)(j.H,{checked:n,onChange:e=>i(e.value)})]}),n&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("p",{children:["Click on any prescription arrow ",(0,u.jsx)(w.KI,{children:"\\mapsto"})," and drag it to configure the bijection ",(0,u.jsx)(w.KI,{children:"\\pi"}),"."]}),(0,u.jsxs)("div",{className:"text-sm",children:[(0,u.jsx)("label",{className:"block mb-1 font-bold",htmlFor:"vertical",children:"Path coloring:"}),(0,u.jsx)(y.J,{className:"w-full",value:c?"Bipartite":"Pathwise",onChange:e=>h("Bipartite"==e.value),options:["Bipartite","Pathwise"]})]}),(0,u.jsxs)("div",{className:"text-sm",children:[(0,u.jsx)("label",{className:"block mb-1 font-bold",htmlFor:"vertical",children:"Lines:"}),(0,u.jsx)(y.J,{className:"w-full",value:f?"Dotted":"Simple",onChange:e=>x("Dotted"==e.value),options:["Simple","Dotted"]})]})]})]})})]})}const S=s.createRoot(document.getElementById("root"));(0,w._)(),S.render((0,u.jsx)(o.StrictMode,{children:(0,u.jsx)(g.mD,{children:(0,u.jsxs)("div",{className:"fixed flex overflow-hidden h-dvh w-full",children:[(0,u.jsx)(k,{}),(0,u.jsx)(N.A,{})]})})}))}},r={};function o(e){var s=r[e];if(void 0!==s)return s.exports;var l=r[e]={exports:{}};return t[e](l,l.exports,o),l.exports}o.m=t,e=[],o.O=(t,r,s,l)=>{if(!r){var n=1/0;for(c=0;c<e.length;c++){for(var[r,s,l]=e[c],i=!0,a=0;a<r.length;a++)(!1&l||n>=l)&&Object.keys(o.O).every((e=>o.O[e](r[a])))?r.splice(a--,1):(i=!1,l<n&&(n=l));if(i){e.splice(c--,1);var d=s();void 0!==d&&(t=d)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[r,s,l]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.j=222,(()=>{var e={222:0,869:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var s,l,[n,i,a]=r,d=0;if(n.some((t=>0!==e[t]))){for(s in i)o.o(i,s)&&(o.m[s]=i[s]);if(a)var c=a(o)}for(t&&t(r);d<n.length;d++)l=n[d],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(c)},r=self.webpackChunkreact_ts_tailwind_starter=self.webpackChunkreact_ts_tailwind_starter||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var s=o.O(void 0,[869,967,810,76],(()=>o(456)));s=o.O(s)})();
//# sourceMappingURL=benes.18c1db4f047cb1178be2.js.map