(()=>{"use strict";var e,t={6462:(e,t,r)=>{var o=r(6540),n=r(5338),s=r(1925),i=r(1821),l=r(2349),u=(r(2222),r(9980)),a=r(4682),d=r(6801);var h=r(4848);var c=function(e){return e[e.Input=0]="Input",e[e.Output=1]="Output",e[e.Internal=2]="Internal",e}(c||{});class f{constructor(e){this.xScale=d.m4Y([-6,6],[0,928]),this.yScale=d.m4Y([-1,e],[0,680]),this.ioHeight=e,this.inputs=[];for(let t=0;t<e;t++){let e={key:"in_"+t,type:c.Input,fy:this.yScale(t),fx:this.xScale(-5)};this.inputs.push(e)}this.outputs=[];for(let t=0;t<e;t++){let e={key:"out_"+t,type:c.Output,fy:this.yScale(t),fx:this.xScale(5)};this.outputs.push(e)}this.nextId=0;let t={key:"r",type:c.Internal},r={key:"j",type:c.Internal};this.nodes=[...this.inputs,...this.outputs,t,r,{key:"k",type:c.Internal}],this.edges=[{source:t,target:r}]}routePermutation(e){let t=[],r=new Set;return this.routePermutation_recurse(e,0,t,r)?t:null}routePermutation_recurse(e,t,r,o){let n=this.outputs[e.lut[t]],s=[],i=[{node:this.inputs[t],pathIdx:0}];for(;;){let l=i.pop();if(!l)break;if(s.length=l.pathIdx,s.push(l.node),o.has(l.node))continue;if(o.add(l.node),l.node===n){if(r.push(s),!(t<this.ioHeight-1))return!0;if(this.routePermutation_recurse(e,t+1,r,o))return!0;r.pop()}s.push();let u=this.adjacentVerts(l.node);for(let e of u)i.push({node:e,pathIdx:s.length})}return!1}adjacentVerts(e){let t=[];for(let r of this.edges)r.source===e?t.push(r.source):r.target===e&&t.push(r.target);return t}getNextId(){return this.nextId++}}function p(e){let{ioHeight:t}=e,r=(0,o.useRef)(null),n=(0,o.useRef)(null),[s,i]=(0,o.useState)(),[l,u]=(0,o.useState)(),[p,x]=(0,o.useState)(),[g,y]=(0,o.useState)(new f(t)),[v,m]=(0,o.useState)(),[,j]=(0,o.useReducer)((e=>e+1),0),w=s?.width||0,k=s?.height||0;function I(){j()}function S(e){let t=new DOMPoint(e.clientX,e.clientY);return t=t.matrixTransform(n.current?.getScreenCTM()?.inverse()),[t.x,t.y]}function N(){v?.nodes(g.nodes).alpha(1).restart(),j()}function O(e,t){let[r,o]=S(e);if(e.ctrlKey){let t={type:c.Internal,key:"usrnd_"+g.getNextId(),y:o,x:r};g.nodes.push(t),N(),e.stopPropagation()}else e.altKey?t&&(x({fromNode:t,toX:r,toY:o}),e.stopPropagation()):t?.type===c.Internal&&(u(t),e.stopPropagation())}function b(e,t){let[r,o]=S(e);if(l&&(l.fx=l.fy=void 0,l.x=r,l.y=o,N(),u(void 0),e.stopPropagation()),p){if(t){let e={source:p.fromNode,target:t};g.edges.push(e)}N(),x(void 0),e.stopPropagation()}}(0,o.useLayoutEffect)((()=>{i(r.current?.getBoundingClientRect());let e=d.tXi(g.nodes);e.on("tick",I),e.force("charge",d.xJS()),e.force("springs",d.kJC(g.edges)),m(e)}),[r]),"undefined"!=typeof window&&(0,a.A)(r,(e=>i(e.contentRect)));let P=[];!function(e){for(let t of g.edges){let r=t.source,o=t.target,n=(0,h.jsx)("line",{x1:r.x,y1:r.y,x2:o.x,y2:o.y,stroke:"white",strokeWidth:4},t.index);e.push(n)}if(p){let t=p.fromNode,r=(0,h.jsx)("line",{x1:t.x,y1:t.y,x2:p.toX,y2:p.toY,stroke:"white",strokeWidth:4},"edgeInteract");e.push(r)}for(let t of g.nodes){let r;t.type===c.Internal?r="#ecf2f8":t.type===c.Input?r="#faa356":t.type===c.Output&&(r="#a2d2fb");let o=(0,h.jsx)("circle",{cx:t.x,cy:t.y,r:10,fill:r,onMouseDown:e=>O(e,t),onMouseUp:e=>b(e,t)},t.key);e.push(o)}}(P);let _=(0,h.jsxs)("svg",{className:"absolute",width:w,height:k,viewBox:"0 0 928 680",onMouseDown:O,onMouseMove:function(e){let[t,r]=S(e);l?(l.fx=t,l.fy=r,N()):p&&(x({fromNode:p.fromNode,toX:t,toY:r}),e.stopPropagation())},onMouseUp:b,children:[(0,h.jsx)("rect",{ref:n,opacity:0,x:"0",y:"0",width:"0",height:"0",stroke:"none",fill:"none"}),P]});return(0,h.jsx)("div",{className:"flex items-stretch w-full h-full p-1",style:{background:"#161b22",flexDirection:"row"},children:(0,h.jsx)("div",{className:"flex grow items-stretch p-1",children:(0,h.jsx)("div",{ref:r,className:"relative flex grow p-0 m-0 overflow-hidden",children:_})})})}class x{constructor(e){this.lut=[...e],this.invLut=Array(e.length);for(let t=0;t<e.length;t++)this.invLut[e[t]]=t}invert(){let e=this.invLut;this.invLut=this.lut,this.lut=e}}function g(e,t,r,o){if(t.length===r)return void o.push(new x(t));let n=Array.from(e).toSorted();for(let s of n)t.push(s),e.delete(s),g(e,t,r,o),e.add(s),t.pop()}function y(e){let t=new Set;for(let r=0;r<e;r++)t.add(r);let r=[];return g(t,[],e,r),r}function v(){let[e,t]=(0,o.useState)(4),[r,n]=(0,o.useState)(y(3)),l=[];for(let t of r)l.push((0,h.jsxs)("div",{children:[t.lut.toString(),(0,h.jsx)(p,{ioHeight:e})]}));return(0,h.jsxs)(s.O,{className:"h-dvh w-full",children:[(0,h.jsx)(s.K,{size:75,className:"overflow-hidden",children:(0,h.jsxs)("div",{className:"flex flex-col w-full",children:[(0,h.jsx)("div",{children:(0,h.jsx)(i.Y,{className:"w-full",name:"benesOrder",value:e,onValueChange:e=>{let r=e.value;r&&!isNaN(r)&&t(r)},mode:"decimal",showButtons:!0,min:1,max:5})}),(0,h.jsx)(p,{ioHeight:3})]})}),(0,h.jsx)(s.K,{size:25,className:"",children:(0,h.jsxs)("div",{className:"flex flex-col",children:["Click and drag to move nodes, Ctrl-Click to add nodes, Alt-Click to add edges.",(0,h.jsx)("h1",{children:"Permutations"}),l]})})]})}const m=n.createRoot(document.getElementById("root"));(0,u._)(),m.render((0,h.jsx)(o.StrictMode,{children:(0,h.jsx)(l.mD,{children:(0,h.jsx)(v,{})})}))}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var s=r[e]={exports:{}};return t[e](s,s.exports,o),s.exports}o.m=t,e=[],o.O=(t,r,n,s)=>{if(!r){var i=1/0;for(d=0;d<e.length;d++){for(var[r,n,s]=e[d],l=!0,u=0;u<r.length;u++)(!1&s||i>=s)&&Object.keys(o.O).every((e=>o.O[e](r[u])))?r.splice(u--,1):(l=!1,s<i&&(i=s));if(l){e.splice(d--,1);var a=n();void 0!==a&&(t=a)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[r,n,s]},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.j=276,(()=>{var e={276:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var n,s,[i,l,u]=r,a=0;if(i.some((t=>0!==e[t]))){for(n in l)o.o(l,n)&&(o.m[n]=l[n]);if(u)var d=u(o)}for(t&&t(r);a<i.length;a++)s=i[a],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(d)},r=self.webpackChunkreact_ts_tailwind_starter=self.webpackChunkreact_ts_tailwind_starter||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=o.O(void 0,[967,810,76],(()=>o(6462)));n=o.O(n)})();
//# sourceMappingURL=construction.4a21a8579d3f72285aa7.js.map