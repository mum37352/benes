{"version":3,"file":"common.70e70ce76060bfcd590d.js","mappings":"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","sources":["webpack://react-ts-tailwind-starter/./src/common/PermWidget.tsx","webpack://react-ts-tailwind-starter/./src/macros.tex","webpack://react-ts-tailwind-starter/./src/common/katex.tsx"],"sourcesContent":["import { useRef, useState } from \"react\";\nimport Permutation from \"./Permutation\";\nimport { KI } from \"./katex\";\n\nexport type Vec2 = [number, number];\n\ntype PermWidgetProps = {\n  vertical: boolean,\n  perm: Permutation,\n  onPermChanged: (newPerm: Permutation) => void,\n  xyToIdx: (x: number, y: number) => number,\n  // Warning: This is currently being called with fractional idx for the\n  // drop indicators.\n  idxToXY: (idx: number) => Vec2,\n}\n\nexport default function PermWidget({vertical=false, perm, onPermChanged, xyToIdx, idxToXY} : PermWidgetProps)\n{\n  let overlayRef = useRef<HTMLDivElement>(null);\n  let [activeDropIndicator, setActiveDropIndicator] = useState<number>(-1);\n  let [dragSource, setDragSource] = useState<number>(-1);\n\n  function handleDrop(e: React.DragEvent<HTMLDivElement>) {\n    setActiveDropIndicator(-1);\n\n    let fromIdx = dragSource;\n    let toIdx = xyToIdx(e.clientX, e.clientY);\n    let invLut = [...perm.invLut];\n    let move = invLut[fromIdx];\n    invLut.splice(fromIdx, 1);\n    invLut.splice(toIdx, 0, move);\n    let newPerm = new Permutation(invLut);\n    newPerm.invert();\n    setDragSource(-1);\n    overlayRef.current?.classList.add(\"pointer-events-none\")\n    onPermChanged(newPerm);\n  }\n\n  function handleDragOver(e: React.DragEvent<HTMLDivElement>) {\n    let fromIdx = dragSource;\n    let toIdx = xyToIdx(e.clientX, e.clientY);\n\n    console.log(e.dataTransfer.getData(\"outputIdx\"), \"is\", fromIdx, toIdx);\n    e.preventDefault();\n    e.clientY;\n\n    if (toIdx < fromIdx) {\n      setActiveDropIndicator(toIdx);\n    } else if (toIdx > fromIdx) {\n      setActiveDropIndicator(toIdx + 1);\n    } else {\n      setActiveDropIndicator(-1);\n    }\n  }\n\n  let height = perm.lut.length;\n  console.log(\"PermWidget perm\", perm);\n  let labelOffset = 20;\n\n  function drawPermArrows(prescriptions: any[], dropIndicators: any[]) {\n    for (let preimage = 0; preimage < height; preimage++) {\n      let outputIdx = perm.lut[preimage];\n      let [x, y] = idxToXY(outputIdx);\n\n\n      let dropIdx = (outputIdx===0 ? 0 : height);\n      let dropStyle: React.CSSProperties = {\n        opacity: (activeDropIndicator === dropIdx) ? 1 : 0\n      };\n      \n      dropStyle[vertical?\"left\":\"top\"] = `${outputIdx===0?\"-\":\"\"}10px`;\n\n      let drop = <div className=\"relative w-0 h-0\">\n        <div\n          key={`drop_${dropIdx}`} \n          className={`absolute transition bg-cyan-400 shrink-0 ${vertical ? \"h-12\" : \"w-12\"} ${vertical ? \"w-0.5\" : \"h-0.5\"}`}\n          style={dropStyle}\n        />\n      </div>;\n\n\n      let predrop = undefined;\n      let postdrop = undefined;\n\n      // Both of these cannot occur at the same time because we have at least two outputs.\n      if (outputIdx === 0) {\n        predrop = drop;\n      } else if (outputIdx === height - 1) {\n        postdrop = drop;\n      }\n\n      function labelStyle(x: number, y: number): React.CSSProperties {\n        return {\n          transform: vertical ? `translate(-50%, 0) translate(${x}px, ${y + labelOffset}px)` :\n          `translate(0, -50%) translate(${x + labelOffset}px, ${y}px)`,\n          flexDirection: vertical ? \"row\" : \"column\"\n        };  \n      }\n\n      prescriptions.push(\n        <div\n          key={\"ob_\" + preimage.toString()}\n          className=\"absolute flex transition-transform duration-200\"\n          style={labelStyle(x, y)}>\n          {predrop}\n          <div\n            className=\"flex items-center bg-white/0 hover:bg-white/30 pushed:bg-white/50 transition rounded-sm cursor-grab p-1 active:cursor-grabbing\"\n            draggable=\"true\"\n            onDragStart={(e: any) => {\n              // HACK: Chrome aborts the drag when we change styles right away. (Firefox does not)\n              // Inspired by https://github.com/react-dnd/react-dnd/issues/1085\n              setTimeout(() => overlayRef.current?.classList.remove(\"pointer-events-none\"), 0);\n              setDragSource(outputIdx);\n            }}\n            style={{ flexDirection: vertical ? \"column\" : \"row\" }}>\n            <div className={`px-1 ${vertical ? \"-rotate-90\" : \"rotate-180\"}`}><KI>{`\\\\mapsto`}</KI></div>\n            <KI>{`${preimage + 1}`}</KI>\n          </div>\n          {postdrop}\n        </div>\n      );\n\n      // Drop indicator\n      if (outputIdx < height - 1) {\n        [x, y] = idxToXY(outputIdx + 0.5);\n        dropIdx = outputIdx+1;\n        dropIndicators.push(<div key={`drop_${dropIdx}`} data-before={outputIdx}\n          className={`absolute transition bg-cyan-400 shrink-0 ${vertical ? \"h-12\" : \"w-12\"} ${vertical ? \"w-0.5\" : \"h-0.5\"}`}\n\n          style={{opacity: activeDropIndicator === outputIdx+1 ? 1 : 0, ...labelStyle(x, y)}}\n        />);\n      }\n    }\n  }\n\n  let prescriptions: any[] = [];\n  let dropIndicators: any[] = [];\n  // For some reason, React seems to recreate nodes if we don't have some basic sorting,\n  // which is why keep an extra list for the drop indicators. Otherwise, the animations\n  // will break.\n  drawPermArrows(prescriptions, dropIndicators);\n\n  return <>\n    {prescriptions}\n    {dropIndicators}\n    <div ref={overlayRef} className={`absolute top-0 left-0 w-full h-full pointer-events-none`} onDragOver={handleDragOver} onDragLeave={() => setActiveDropIndicator(-1)} onDrop={handleDrop}\n    >\n    </div>\n  </>;\n}\n","export default \"% Swap \\\\phi and \\\\varphi\\n\\\\let\\\\temp\\\\phi\\n\\\\let\\\\phi\\\\varphi\\n\\\\let\\\\varphi\\\\temp\\n% Swap \\\\epsilon and \\\\varepsilon\\n\\\\let\\\\temp\\\\epsilon\\n\\\\let\\\\epsilon\\\\varepsilon\\n\\\\let\\\\varepsilon\\\\temp\\n\\n\\\\def\\\\nonzero{\\\\setminus\\\\{0\\\\}}\\n\\\\def\\\\units{^\\\\times}\\n\\\\def\\\\inv{^{-1}}\\n\\\\def\\\\K{\\\\mathbb K}\\n\\\\def\\\\N{\\\\mathbb N}\\n\\\\def\\\\Z{\\\\mathbb Z}\\n\\\\def\\\\F{\\\\mathbb F}\\n\\\\def\\\\R{\\\\mathbb R}\\n\\\\def\\\\S{\\\\mathbb S}\\n\\\\def\\\\T{\\\\mathbb T}\\n\\\\def\\\\Q{\\\\mathbb Q}\\n\\\\def\\\\C{\\\\mathbb C}\\n\\\\def\\\\No{\\\\mathbb N_0}\\n\\\\def\\\\N{\\\\mathbb N^\\\\ast}\\n\\\\def\\\\ol{\\\\overline}\\n\\\\def\\\\dual{^\\\\ast}\\n\\\\def\\\\bidual{^{\\\\ast\\\\ast}}\\n\\\\def\\\\lorth{^{\\\\perp{\\\\rm L}}}\\n\\\\def\\\\rorth{^{\\\\perp{\\\\rm R}}}\\n\\n\\\\def\\\\Ext{\\\\operatorname{Ext}}\\n\\\\def\\\\Int{\\\\operatorname{Int}}\\n\\\\def\\\\ad{^{\\\\operatorname{ad}}}\\n\\\\def\\\\Abb{\\\\operatorname{Abb}}\\n\\\\def\\\\Bil{\\\\operatorname{Bil}}\\n\\\\def\\\\Sil{\\\\operatorname{Sil}}\\n\\\\def\\\\Hom{\\\\operatorname{Hom}}\\n\\\\def\\\\End{\\\\operatorname{End}}\\n\\\\def\\\\det{\\\\operatorname{det}}\\n\\\\def\\\\ker{\\\\operatorname{ker}}\\n\\\\def\\\\im{\\\\operatorname{im}}\\n\\\\def\\\\chara{\\\\operatorname{char}}\\n\\\\def\\\\dim{\\\\operatorname{dim}}\\n\\\\def\\\\Mat{\\\\operatorname{Mat}}\\n\\\\def\\\\GL{\\\\operatorname{GL}}\\n\\\\def\\\\O{\\\\operatorname{O}}\\n\\\\def\\\\M{\\\\operatorname{M}}\\n\\\\def\\\\id{\\\\operatorname{id}}\\n\\\\def\\\\inc{\\\\operatorname{inc}}\\n\\\\def\\\\ev{\\\\operatorname{ev}}\\n\\\\def\\\\pow{\\\\operatorname{pow}}\\n\\\\def\\\\char{\\\\operatorname{char}}\\n\\\\def\\\\op{\\\\operatorname}  \\n\\\\def\\\\onto{\\\\twoheadrightarrow}\\n\\\\def\\\\tosqg{\\\\xrightarrow{\\\\sim}}\\n\\n\\\\def\\\\soln{\\\\rule{\\\\textwidth}{0.4pt}}\\n\\n\\\\def\\\\set|{\\\\enspace | \\\\enspace}\\n\\\\def\\\\subs{\\\\subseteq}\\n\\\\def\\\\sups{\\\\supseteq}\\n\\\\def\\\\subn{\\\\trianglelefteq}\\n\\\\def\\\\supn{\\\\trianglerighteq}\\n\\\\def\\\\opensubs{\\\\underset{\\\\text{open}}{\\\\subs}}\\n\\\\def\\\\closedsubs{\\\\underset{\\\\text{closed}}{\\\\subs}}\\n\\\\def\\\\opensubg{\\\\underset{\\\\text{open}}{\\\\leq}}\\n\\\\def\\\\closedsubg{\\\\underset{\\\\text{closed}}{\\\\leq}}\\n\\\\def\\\\opensubn{\\\\underset{\\\\text{open}}{\\\\subn}}\\n\\\\def\\\\closedsubn{\\\\underset{\\\\text{closed}}{\\\\subn}}\\n\\\\def\\\\openleq{\\\\underset{\\\\text{open}}{\\\\leq}}\\n\\\\def\\\\closedleq{\\\\underset{\\\\text{closed}}{\\\\leq}}\\n\\n\\n\\\\def\\\\Abar{\\\\ol{A}}\\n\\\\def\\\\Bbar{\\\\ol{B}}\\n\\\\def\\\\Cbar{\\\\ol{C}}\\n\\\\def\\\\Dbar{\\\\ol{D}}\\n\\\\def\\\\Ebar{\\\\ol{E}}\\n\\\\def\\\\Fbar{\\\\ol{F}}\\n\\\\def\\\\Gbar{\\\\ol{G}}\\n\\\\def\\\\Hbar{\\\\ol{H}}\\n\\\\def\\\\Ibar{\\\\ol{I}}\\n\\\\def\\\\Jbar{\\\\ol{J}}\\n\\\\def\\\\Kbar{\\\\ol{K}}\\n\\\\def\\\\Lbar{\\\\ol{L}}\\n\\\\def\\\\Mbar{\\\\ol{M}}\\n\\\\def\\\\Nbar{\\\\ol{N}}\\n\\\\def\\\\Obar{\\\\ol{O}}\\n\\\\def\\\\Pbar{\\\\ol{P}}\\n\\\\def\\\\Qbar{\\\\ol{Q}}\\n\\\\def\\\\Rbar{\\\\ol{R}}\\n\\\\def\\\\Sbar{\\\\ol{S}}\\n\\\\def\\\\Tbar{\\\\ol{T}}\\n\\\\def\\\\Ubar{\\\\ol{U}}\\n\\\\def\\\\Vbar{\\\\ol{V}}\\n\\\\def\\\\Wbar{\\\\ol{W}}\\n\\\\def\\\\Xbar{\\\\ol{X}}\\n\\\\def\\\\Ybar{\\\\ol{Y}}\\n\\\\def\\\\Zbar{\\\\ol{Z}}\\n\\n\\\\def\\\\abar{\\\\ol{a}}\\n\\\\def\\\\bbar{\\\\ol{b}}\\n\\\\def\\\\cbar{\\\\ol{c}}\\n\\\\def\\\\dbar{\\\\ol{d}}\\n\\\\def\\\\ebar{\\\\ol{e}}\\n\\\\def\\\\fbar{\\\\ol{f}}\\n\\\\def\\\\gbar{\\\\ol{g}}\\n\\\\def\\\\hbar{\\\\ol{h}}\\n\\\\def\\\\ibar{\\\\ol{i}}\\n\\\\def\\\\jbar{\\\\ol{j}}\\n\\\\def\\\\kbar{\\\\ol{k}}\\n\\\\def\\\\lbar{\\\\ol{l}}\\n\\\\def\\\\mbar{\\\\ol{m}}\\n\\\\def\\\\nbar{\\\\ol{n}}\\n\\\\def\\\\obar{\\\\ol{o}}\\n\\\\def\\\\pbar{\\\\ol{p}}\\n\\\\def\\\\qbar{\\\\ol{q}}\\n\\\\def\\\\rbar{\\\\ol{r}}\\n\\\\def\\\\sbar{\\\\ol{s}}\\n\\\\def\\\\tbar{\\\\ol{t}}\\n\\\\def\\\\ubar{\\\\ol{u}}\\n\\\\def\\\\vbar{\\\\ol{v}}\\n\\\\def\\\\wbar{\\\\ol{w}}\\n\\\\def\\\\xbar{\\\\ol{x}}\\n\\\\def\\\\ybar{\\\\ol{y}}\\n\\\\def\\\\zbar{\\\\ol{z}}\\n\\n\\\\def\\\\Ahat{\\\\hat{A}}\\n\\\\def\\\\Bhat{\\\\hat{B}}\\n\\\\def\\\\Chat{\\\\hat{C}}\\n\\\\def\\\\Dhat{\\\\hat{D}}\\n\\\\def\\\\Ehat{\\\\hat{E}}\\n\\\\def\\\\Fhat{\\\\hat{F}}\\n\\\\def\\\\Ghat{\\\\hat{G}}\\n\\\\def\\\\Hhat{\\\\hat{H}}\\n\\\\def\\\\Ihat{\\\\hat{I}}\\n\\\\def\\\\Jhat{\\\\hat{J}}\\n\\\\def\\\\Khat{\\\\hat{K}}\\n\\\\def\\\\Lhat{\\\\hat{L}}\\n\\\\def\\\\Mhat{\\\\hat{M}}\\n\\\\def\\\\Nhat{\\\\hat{N}}\\n\\\\def\\\\Ohat{\\\\hat{O}}\\n\\\\def\\\\Phat{\\\\hat{P}}\\n\\\\def\\\\Qhat{\\\\hat{Q}}\\n\\\\def\\\\Rhat{\\\\hat{R}}\\n\\\\def\\\\Shat{\\\\hat{S}}\\n\\\\def\\\\That{\\\\hat{T}}\\n\\\\def\\\\Uhat{\\\\hat{U}}\\n\\\\def\\\\Vhat{\\\\hat{V}}\\n\\\\def\\\\What{\\\\hat{W}}\\n\\\\def\\\\Xhat{\\\\hat{X}}\\n\\\\def\\\\Yhat{\\\\hat{Y}}\\n\\\\def\\\\Zhat{\\\\hat{Z}}\\n\\n\\\\def\\\\ahat{\\\\hat{a}}\\n\\\\def\\\\bhat{\\\\hat{b}}\\n\\\\def\\\\chat{\\\\hat{c}}\\n\\\\def\\\\dhat{\\\\hat{d}}\\n\\\\def\\\\ehat{\\\\hat{e}}\\n\\\\def\\\\fhat{\\\\hat{f}}\\n\\\\def\\\\ghat{\\\\hat{g}}\\n\\\\def\\\\hhat{\\\\hat{h}}\\n\\\\def\\\\ihat{\\\\hat{i}}\\n\\\\def\\\\jhat{\\\\hat{j}}\\n\\\\def\\\\khat{\\\\hat{k}}\\n\\\\def\\\\lhat{\\\\hat{l}}\\n\\\\def\\\\mhat{\\\\hat{m}}\\n\\\\def\\\\nhat{\\\\hat{n}}\\n\\\\def\\\\ohat{\\\\hat{o}}\\n\\\\def\\\\phat{\\\\hat{p}}\\n\\\\def\\\\qhat{\\\\hat{q}}\\n\\\\def\\\\rhat{\\\\hat{r}}\\n\\\\def\\\\shat{\\\\hat{s}}\\n\\\\def\\\\that{\\\\hat{t}}\\n\\\\def\\\\uhat{\\\\hat{u}}\\n\\\\def\\\\vhat{\\\\hat{v}}\\n\\\\def\\\\what{\\\\hat{w}}\\n\\\\def\\\\xhat{\\\\hat{x}}\\n\\\\def\\\\yhat{\\\\hat{y}}\\n\\\\def\\\\zhat{\\\\hat{z}}\\n\\n\\n\\n\\\\def\\\\Asqg{\\\\tilde{A}}\\n\\\\def\\\\Bsqg{\\\\tilde{B}}\\n\\\\def\\\\Csqg{\\\\tilde{C}}\\n\\\\def\\\\Dsqg{\\\\tilde{D}}\\n\\\\def\\\\Esqg{\\\\tilde{E}}\\n\\\\def\\\\Fsqg{\\\\tilde{F}}\\n\\\\def\\\\Gsqg{\\\\tilde{G}}\\n\\\\def\\\\Hsqg{\\\\tilde{H}}\\n\\\\def\\\\Isqg{\\\\tilde{I}}\\n\\\\def\\\\Jsqg{\\\\tilde{J}}\\n\\\\def\\\\Ksqg{\\\\tilde{K}}\\n\\\\def\\\\Lsqg{\\\\tilde{L}}\\n\\\\def\\\\Msqg{\\\\tilde{M}}\\n\\\\def\\\\Nsqg{\\\\tilde{N}}\\n\\\\def\\\\Osqg{\\\\tilde{O}}\\n\\\\def\\\\Psqg{\\\\tilde{P}}\\n\\\\def\\\\Qsqg{\\\\tilde{Q}}\\n\\\\def\\\\Rsqg{\\\\tilde{R}}\\n\\\\def\\\\Ssqg{\\\\tilde{S}}\\n\\\\def\\\\Tsqg{\\\\tilde{T}}\\n\\\\def\\\\Usqg{\\\\tilde{U}}\\n\\\\def\\\\Vsqg{\\\\tilde{V}}\\n\\\\def\\\\Wsqg{\\\\tilde{W}}\\n\\\\def\\\\Xsqg{\\\\tilde{X}}\\n\\\\def\\\\Ysqg{\\\\tilde{Y}}\\n\\\\def\\\\Zsqg{\\\\tilde{Z}}\\n\\n\\\\def\\\\asqg{\\\\tilde{a}}\\n\\\\def\\\\bsqg{\\\\tilde{b}}\\n\\\\def\\\\csqg{\\\\tilde{c}}\\n\\\\def\\\\dsqg{\\\\tilde{d}}\\n\\\\def\\\\esqg{\\\\tilde{e}}\\n\\\\def\\\\fsqg{\\\\tilde{f}}\\n\\\\def\\\\gsqg{\\\\tilde{g}}\\n\\\\def\\\\hsqg{\\\\tilde{h}}\\n\\\\def\\\\isqg{\\\\tilde{i}}\\n\\\\def\\\\jsqg{\\\\tilde{j}}\\n\\\\def\\\\ksqg{\\\\tilde{k}}\\n\\\\def\\\\lsqg{\\\\tilde{l}}\\n\\\\def\\\\msqg{\\\\tilde{m}}\\n\\\\def\\\\nsqg{\\\\tilde{n}}\\n\\\\def\\\\osqg{\\\\tilde{o}}\\n\\\\def\\\\psqg{\\\\tilde{p}}\\n\\\\def\\\\qsqg{\\\\tilde{q}}\\n\\\\def\\\\rsqg{\\\\tilde{r}}\\n\\\\def\\\\ssqg{\\\\tilde{s}}\\n\\\\def\\\\tsqg{\\\\tilde{t}}\\n\\\\def\\\\usqg{\\\\tilde{u}}\\n\\\\def\\\\vsqg{\\\\tilde{v}}\\n\\\\def\\\\wsqg{\\\\tilde{w}}\\n\\\\def\\\\xsqg{\\\\tilde{x}}\\n\\\\def\\\\ysqg{\\\\tilde{y}}\\n\\\\def\\\\zsqg{\\\\tilde{z}}\\n\\n\\\\def\\\\Alphabld{\\\\boldsymbol{\\\\Alpha}}\\n\\\\def\\\\Betabld{\\\\boldsymbol{\\\\Beta}}\\n\\\\def\\\\Gammabld{\\\\boldsymbol{\\\\Gamma}}\\n\\\\def\\\\Deltabld{\\\\boldsymbol{\\\\Delta}}\\n\\\\def\\\\Epsilonbld{\\\\boldsymbol{\\\\Epsilon}}\\n\\\\def\\\\Zetabld{\\\\boldsymbol{\\\\Zeta}}\\n\\\\def\\\\Etabld{\\\\boldsymbol{\\\\Eta}}\\n\\\\def\\\\Thetabld{\\\\boldsymbol{\\\\Theta}}\\n\\\\def\\\\Iotabld{\\\\boldsymbol{\\\\Iota}}\\n\\\\def\\\\Kappabld{\\\\boldsymbol{\\\\Kappa}}\\n\\\\def\\\\Lambdabld{\\\\boldsymbol{\\\\Lambda}}\\n\\\\def\\\\Mubld{\\\\boldsymbol{\\\\Mu}}\\n\\\\def\\\\Nubld{\\\\boldsymbol{\\\\Nu}}\\n\\\\def\\\\Xibld{\\\\boldsymbol{\\\\Xi}}\\n\\\\def\\\\Omicronbld{\\\\boldsymbol{\\\\Omicron}}\\n\\\\def\\\\Pibld{\\\\boldsymbol{\\\\Pi}}\\n\\\\def\\\\Rhobld{\\\\boldsymbol{\\\\Rho}}\\n\\\\def\\\\Sigmabld{\\\\boldsymbol{\\\\Sigma}}\\n\\\\def\\\\Taubld{\\\\boldsymbol{\\\\Tau}}\\n\\\\def\\\\Upsilonbld{\\\\boldsymbol{\\\\Upsilon}}\\n\\\\def\\\\Phibld{\\\\boldsymbol{\\\\Phi}}\\n\\\\def\\\\Chibld{\\\\boldsymbol{\\\\Chi}}\\n\\\\def\\\\Psibld{\\\\boldsymbol{\\\\Psi}}\\n\\\\def\\\\Omegabld{\\\\boldsymbol{\\\\Omega}}\\n\\n\\n\\\\def\\\\alphabld{\\\\boldsymbol{\\\\alpha}}\\n\\\\def\\\\betabld{\\\\boldsymbol{\\\\beta}}\\n\\\\def\\\\gammabld{\\\\boldsymbol{\\\\gamma}}\\n\\\\def\\\\deltabld{\\\\boldsymbol{\\\\delta}}\\n\\\\def\\\\epsilonbld{\\\\boldsymbol{\\\\epsilon}}\\n\\\\def\\\\zetabld{\\\\boldsymbol{\\\\zeta}}\\n\\\\def\\\\etabld{\\\\boldsymbol{\\\\eta}}\\n\\\\def\\\\zhetabld{\\\\boldsymbol{\\\\theta}}\\n\\\\def\\\\iotabld{\\\\boldsymbol{\\\\iota}}\\n\\\\def\\\\kappabld{\\\\boldsymbol{\\\\kappa}}\\n\\\\def\\\\lambdabld{\\\\boldsymbol{\\\\lambda}}\\n\\\\def\\\\mubld{\\\\boldsymbol{\\\\mu}}\\n\\\\def\\\\nubld{\\\\boldsymbol{\\\\nu}}\\n\\\\def\\\\xibld{\\\\boldsymbol{\\\\xi}}\\n\\\\def\\\\omicronbld{\\\\boldsymbol{\\\\omicron}}\\n\\\\def\\\\pibld{\\\\boldsymbol{\\\\pi}}\\n\\\\def\\\\rhobld{\\\\boldsymbol{\\\\rho}}\\n\\\\def\\\\sigmabld{\\\\boldsymbol{\\\\sigma}}\\n\\\\def\\\\taubld{\\\\boldsymbol{\\\\tau}}\\n\\\\def\\\\upsilonbld{\\\\boldsymbol{\\\\upsilon}}\\n\\\\def\\\\phibld{\\\\boldsymbol{\\\\phi}}\\n\\\\def\\\\chibld{\\\\boldsymbol{\\\\chi}}\\n\\\\def\\\\psibld{\\\\boldsymbol{\\\\psi}}\\n\\\\def\\\\omegabld{\\\\boldsymbol{\\\\omega}}\\n\\n\\n\\\\def\\\\Alphasqg{\\\\tilde{\\\\Alpha}}\\n\\\\def\\\\Betasqg{\\\\tilde{\\\\Beta}}\\n\\\\def\\\\Gammasqg{\\\\tilde{\\\\Gamma}}\\n\\\\def\\\\Deltasqg{\\\\tilde{\\\\Delta}}\\n\\\\def\\\\Epsilonsqg{\\\\tilde{\\\\Epsilon}}\\n\\\\def\\\\Zetasqg{\\\\tilde{\\\\Zeta}}\\n\\\\def\\\\Etasqg{\\\\tilde{\\\\Eta}}\\n\\\\def\\\\Thetasqg{\\\\tilde{\\\\Theta}}\\n\\\\def\\\\Iotasqg{\\\\tilde{\\\\Iota}}\\n\\\\def\\\\Kappasqg{\\\\tilde{\\\\Kappa}}\\n\\\\def\\\\Lambdasqg{\\\\tilde{\\\\Lambda}}\\n\\\\def\\\\Musqg{\\\\tilde{\\\\Mu}}\\n\\\\def\\\\Nusqg{\\\\tilde{\\\\Nu}}\\n\\\\def\\\\Xisqg{\\\\tilde{\\\\Xi}}\\n\\\\def\\\\Omicronsqg{\\\\tilde{\\\\Omicron}}\\n\\\\def\\\\Pisqg{\\\\tilde{\\\\Pi}}\\n\\\\def\\\\Rhosqg{\\\\tilde{\\\\Rho}}\\n\\\\def\\\\Sigmasqg{\\\\tilde{\\\\Sigma}}\\n\\\\def\\\\Tausqg{\\\\tilde{\\\\Tau}}\\n\\\\def\\\\Upsilonsqg{\\\\tilde{\\\\Upsilon}}\\n\\\\def\\\\Phisqg{\\\\tilde{\\\\Phi}}\\n\\\\def\\\\Chisqg{\\\\tilde{\\\\Chi}}\\n\\\\def\\\\Psisqg{\\\\tilde{\\\\Psi}}\\n\\\\def\\\\Omegasqg{\\\\tilde{\\\\Omega}}\\n\\n\\\\def\\\\alphasqg{\\\\tilde{\\\\alpha}}\\n\\\\def\\\\betasqg{\\\\tilde{\\\\beta}}\\n\\\\def\\\\gammasqg{\\\\tilde{\\\\gamma}}\\n\\\\def\\\\deltasqg{\\\\tilde{\\\\delta}}\\n\\\\def\\\\epsilonsqg{\\\\tilde{\\\\epsilon}}\\n\\\\def\\\\zetasqg{\\\\tilde{\\\\zeta}}\\n\\\\def\\\\etasqg{\\\\tilde{\\\\eta}}\\n\\\\def\\\\thetasqg{\\\\tilde{\\\\theta}}\\n\\\\def\\\\iotasqg{\\\\tilde{\\\\iota}}\\n\\\\def\\\\kappasqg{\\\\tilde{\\\\kappa}}\\n\\\\def\\\\lambdasqg{\\\\tilde{\\\\lambda}}\\n\\\\def\\\\musqg{\\\\tilde{\\\\mu}}\\n\\\\def\\\\nusqg{\\\\tilde{\\\\nu}}\\n\\\\def\\\\xisqg{\\\\tilde{\\\\xi}}\\n\\\\def\\\\omicronsqg{\\\\tilde{\\\\omicron}}\\n\\\\def\\\\pisqg{\\\\tilde{\\\\pi}}\\n\\\\def\\\\rhosqg{\\\\tilde{\\\\rho}}\\n\\\\def\\\\sigmasqg{\\\\tilde{\\\\sigma}}\\n\\\\def\\\\tausqg{\\\\tilde{\\\\tau}}\\n\\\\def\\\\upsilonsqg{\\\\tilde{\\\\upsilon}}\\n\\\\def\\\\phisqg{\\\\tilde{\\\\phi}}\\n\\\\def\\\\vhisqg{\\\\tilde{\\\\chi}}\\n\\\\def\\\\psisqg{\\\\tilde{\\\\psi}}\\n\\\\def\\\\omegasqg{\\\\tilde{\\\\omega}}\\n\\n\\\\def\\\\setm{\\\\setminus}\\n\\\\def\\\\defas{\\\\coloneqq}\\n\\\\def\\\\Cup{\\\\bigcup}\\n\\\\def\\\\Cap{\\\\bigcap}\\n\\\\def\\\\Sum{\\\\sum}\";","import React from \"react\";\n\nimport katex from \"katex\";\n\nimport macrosTex from \"!!raw-loader!@/macros.tex\";\n\nimport 'katex/dist/katex.min.css';\n\nlet macros = {};\n\n// We don't use https://github.com/MatejBransky/react-katex?tab=readme-ov-file because it needs\n// useState, which doesn't work in React server components.\n// We don't use https://github.com/talyssonoc/react-katex/tree/master/packages/react-katex because it\n// doesn't allow for custom options (which we need to avoid reparsing our macros).\n\n// Called once, see https://github.com/KaTeX/KaTeX/issues/2915\nexport function initMacros() {\n  katex.renderToString(macrosTex, {macros, globalGroup: true});\n}\n\nfunction KI_({ children } : { children: React.ReactNode }) {\n  let html = katex.renderToString(\n    children?.toString() || \"\",\n    {macros});\n  return <span className=\"text-md\" dangerouslySetInnerHTML={{__html: html}} />;\n}\n\nfunction KB_({ children } : { children: React.ReactNode }) {\n  let html = katex.renderToString(\n    children?.toString() || \"\",\n    {displayMode: true, macros});\n  return <span className=\"text-md\" dangerouslySetInnerHTML={{__html: html}} />;\n}\n\nexport let KI = React.memo(KI_);\nexport let KB = React.memo(KB_);"],"names":["PermWidget","_ref","vertical","perm","onPermChanged","xyToIdx","idxToXY","overlayRef","useRef","activeDropIndicator","setActiveDropIndicator","useState","dragSource","setDragSource","height","lut","length","prescriptions","dropIndicators","preimage","outputIdx","x","y","dropIdx","dropStyle","opacity","predrop","postdrop","drop","_jsx","className","children","style","labelStyle","transform","flexDirection","push","_jsxs","draggable","onDragStart","e","setTimeout","current","classList","remove","KI","toString","drawPermArrows","_Fragment","ref","onDragOver","fromIdx","toIdx","clientX","clientY","preventDefault","onDragLeave","onDrop","invLut","move","splice","newPerm","Permutation","invert","add","macros","initMacros","katex","macrosTex","globalGroup","React","html","dangerouslySetInnerHTML","__html"],"sourceRoot":""}